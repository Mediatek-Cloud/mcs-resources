# Fade an LED on LinkIt 7687 with C Language

This fading example demonstrates the use of PWM data channel on MCS to fade an LED light of LinkIt 7687.

## Create a prototype and test device on MCS

1. Download the [sample prototype](https://iamblue.gitbooks.io/mt7687-on-linkit-rtos-ebook-for-community/content/zh-TW/cloud/device.json) we prepared in advance.

2. Create a prototype on MCS by importing the file you just downloaded in previous step. Read more about [how to create a prototype on MCS](https://mcs.mediatek.com/resources/latest/tutorial/getting_started#create-your-first-prototype).
3. Create a test device under this prototype. Read more about [how to create a test device on MCS](https://mcs.mediatek.com/resources/latest/tutorial/getting_started#create-your-first-test-device).

## Build your own project for LinkIt 7687 development borad
1. Clone or download [**mcs\_control\_pwm\_example**](https://github.com/Mediatek-Cloud/mcs_control_pwm_example) project from Github to your computer.
2. Copy **mcs\_control\_pwm** folder to **{SDK_Root}/project/mt7687\_hdk/apps/mcs\_control\_pwm**.

3. Replace the following variables in **{SDK_Root}/project/mt7687\_hdk/apps/mcs\_control\_pwm/src/main.c** with real values of your test device. The **host** variable specifies which MCS site you are going to connect with. **com** stands for MCS global and **cn** stands for MCS China.

	```
	#define deviceId "Input your deviceId"
	#define deviceKey "Input your deviceKey"
	#define Ssid "Input your wifi ssid"
	#define Password "Input your password"
	// If you are connecting to MCS China, use "cn" instead of "com"
	#define host "com"
	```

4. 如何切換 .com and .cn???
5. Build the binaries of LinkIt 7687 for this example by running the following command under **SDK root** directory:

	```
	./build.sh mt7687_hdk mcs_control_pwm
	```
6. The output binaries are in **{SDK_Root}/out/mt7687\_hdk/mcs\_control\_pwm/** folder.


## Download the binaries to the LinkIt 7687 development board.

1. Set the board to **Flash Recovery** mode.
2. Connect LinkIt 7687 to your computer.
3. Locate the **mcs\_control\_pwm.bin** file and copy this file to the MT76x7 mass storage device.
4. The on-board LED **U6001** will start to blink, indicating flash memory update.
5. Wait for the mass storage device to disappear and re-appear again and the download process is completed.
6. Set the board back to Flash Normal mode and press **RST** button to reboot the system. 

## Start to interact with your development board on MCS

Go to MediaTek Cloud Sandbox and use the PWM control data channel to fade in and out the LED light on LinkIt 7687 HDK.

需要補上圖片，表示 device 真的能從雲端控制
