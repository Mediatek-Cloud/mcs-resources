# Key concept

This section describes the key components that make up a Wearables or IoT project in MediaTek Cloud Sandbox. All of your project activities take place within the **Development** pages of the MediaTek Cloud Sandbox. In addition to which, the **Management** page enables you to view all the released devices you have created or have access to. Also, in the **Dashboard** you can find the overview of your prototype and test device status and get to know the related recent activity and your platform usage.

# Dashboard

Everytime the user log into the MCS console, the user will be directed to the dashboard page. The **Dashboard** contains the following information:

* **Quick start guide** where help the user to get started with the MCS platform.
* **Overview** where the user finds the latest updated prototype and test device information.
* **Number of used** where the user finds the platform usage.
* **Quick resources** where we provides the most popular resource links.
* **Recent activity** where the user finds the related activities of the prototypes and test devices.



# Development

The Development page has features that enable you to create one or more **Prototypes** then define a number of physical devices based on that prototype. Each prototype, may contain:


- **Data Channels**, each of a particular **Data Type**.
- **Trigger and action** for changes in the data received from or sent to a device.
- **User privileges** to enable team members or collaborators to view or edit prototypes and device details.
- **Firmware** versions that can be pushed to devices.
- **Test device** that represent each physical device based on the prototype.

Once you’ve defined a Prototype, you can add devices as you need throughout your project.

## Prototype


![](../images/Key_concept/img_keyconcept_01.png)

A **Prototype** is the blueprint of the device you’re developing. Each prototype has a unique prototype Id and prototype Key.

### Data Channel

A **Data Channel** represents:
- data generated by a component of a device that will be stored in the sandbox or
- a command that can be send from the sandbox to a component of the device.

These data channels are implemented in the sandbox as the following types:
- Display
- Controller
- Hybrid

### Data Channel Type

#### Display

![](../images/Key_concept/img_keyconcept_02.png)

This data channel type is for data generated from a component of a device that has no related commands. For example data from a temperature sensor that is pushed to the sandbox and stored as a sequence over time.


#### Controller

![](../images/Key_concept/img_keyconcept_03.png)

This data channel type is for data generated in the sandbox and sent to the device to control the setting of a logical or physical component in the device. For example, a switch to turn a light on or off.


#### Hybrid

![](../images/Key_concept/img_keyconcept_04.png)

This data channel enables a Display and Controller data channel to be combined, where there is a logical relationship between the two. For example, as between the data from a temperature sensor and the control settings for an air conditioning unit.


### Data Types

MCS provides following data channels to control the devices or display the data points.

- **ON/OFF** — this data type represents a switch and enables the user to activate or deactivate a component of the device, such as turning a light on or off.

- **Category** — this data type represents an arbitrary category. You’re free to define the category and its content as you wish. For example, you could store weekday, month, fan settings (off, slow, medium and fast) and alike.

- **int** — this data type represents an arbitrary integer, such as the number of steps a user has taken.

- **float** — this data type represents an arbitrary floating point number, such as temperature.

- **string** — this data type represents a string, such as a message issued by the device.

- **HEX** — this data type represents a hexadecimal value, such as the color used in an LED display.

- **GPS** — this data type represents a geo-location identified by longitude, latitude, elevation and related attributes.

- **GPIO** — this data type represents a digital signal for a specific GPIO pin, such as HIGH on Pin 4.

- **PWM** — this data type represents a PWM signal delivered to a specific GPIO pin, such as level 15 on Pin 3.

- **Analog** — this data channel represents an integer within a range of two values defined by users. Analog slider allows user to finely tune the settings, such as music volume controls.

- **Gamepad** — this data channel represents a direction contorller with four-way digital buttons. You can control your robot or remote contorl car easily with this data channel.

- **Image** — this is a display type of data channels for images. The images will be stored in PNG format after uploaded.

- **Video Stream** — this is a display type of data channels for video streaming application, such as a home surveillance camera.


### Notifications

This function enables you to define criteria that trigger an email or cloud-based notification as well as define additional user’s the notification will be sent to — you as the prototype owner receive notifications by default.

Triggers are available for:

- Data received on a channel being above or below a specific value, which will issue a defined number of notifications while the data remains above or below the trigger value.

- Each time the data value is changed on a Controller data channel.


### User privileges

This feature enables you to give other MCS users various privileges to access the Prototype, such as the ability to view the Prototype settings, create a device and alike.


### Firmware

Using this feature you can upload and manage the firmware for a specific prototype. Once devices have been created from the prototype the sandbox will detect compatible devices and offer their users the option to update the devices’ firmware over the air.

## Test Devices

This feature enables you to create test devices from the Prototype details. Each device you create is given a **Device ID** and **Device Key**, which you use in the MediaTek Cloud Sandbox APIs to identify data pushed to and pulled from the device. Device details, along with their ID and key, are displayed in your **Test Devices** page under **Development**.

You can use the test device to test the prototype that you are developing before officially release the prototype for end users. Please be noted that the data channels and trigger & action rules will chanege with the inherited prototype. You can make use of this feature to test your prototype anytime in your development stage.

In this page, you can see the data channel, user privilege, and trigger and action configurations as defined in the device’s prototype. You can modify the trigger and action and user privilege settings for specific devices on this page. You can also see the device Id and device key, in addition to being able to see those details in the Test device tab in a prototype’s details page.

In addition to listing all the devices created for your prototypes, this page also shows devices from other prototypes that you have been given the access to. The actions you can do to the devices vary depending on the privileges granted to you. For example, if you are a viewer of the device, you can only see the data and cannot make any change to the device.


# Management

After your prototype is sufficiently tested and you are ready to create devices for real trial, you can beta-release your prototype and start create devices for it. Our **Management** page enables you to easily track the device status for each prototype including the device activation ratio, device online time, and uploading data points.

## Beta-release
Beta-release is for you to share your prototype idea with a samll group of makers. Using this function to simulate real scenario and collect feedback before officially commercialized your prototype.

Once you beta-release your prototype, the prototype will be frozen, which means you can no longer make any modification to the prototype including the prototype detail, data channels, and triiger & action rules. However, you can still add other developers to join this prototype or continue to upload firmware for the test device or device to upgrade.


## Device
A device is differenct from a test device. Test devices follow the changes made to the prototype while the device does not. User can only create devices after the prototype is beta-release and frozen. User can choose to create device at once or separately base on his/her needs.

After devices are created, user can manage those devices in **Management** page, where devices are categorized by prototype. Each device will have a unique activation code, the device will only be available after being activated.


# Command Server

Command server is for you to give command to the device from MCS. If you wish not only to upload data to MCS but also need to control your device using the MCS console, you have to connect the device to the command server in order to give command to device through MCS.

Here is the steps to connect your device to MCS:
1. Build a TCP long connection between command server and device.
2. Maintaining heart beat.
3. Give command through MCS console.


## Build a TCP long connection

To set up TCP long connection between the device and the command server, the device will need to first send a REST API getConnection to request a set of ip and port to build a TCP connection. The MCS will respond with its IP address and a port to the device.

Use **HTTPs GET** to  set up connections between device and command server.

```
https://api.mediatek.com/mcs/v2/devices/:deviceId/connections

```

## Maintaining heartbeat

Once get the server ip and port to connect, the device need to send a heartbeat to the command server to be identified. The device also need to sent heartbeats to the server every 120 seconds to stay connected, or the server will disconnect the device.

Heartbeat format:

```
deviceId,deviceKey,timestamp

```
The timestamp is optional, if you do not want to send the timestamp, just put 0 in the timestamp field.



## Give command through MCS console

After the TCP long connection is built, the user can give command to the device via the MSC console.

The command format will be parse in the following format:

```
deviceId,deviceKey,timestamp,dataChnId,commandValue

```

For more detail, please refer to the [command server format](https://mcs.mediatek.com/resources/latest/api_references/#get-connection).

