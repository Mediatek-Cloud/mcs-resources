# Upload data points

## Description

Use **HTTPs POST** to upload data points

## Request
### URL


* **Upload with CSV format**

```
https://api.mediatek.com/mcs/v2/devices/:deviceId/datapoints.csv

```

* **Upload with JSON format**

```
https://api.mediatek.com/mcs/v2/devices/:deviceId/datapoints

```

You can upload 5 data points in an upload request at most.

### Method

POST


### Header

**1. Access token**


* Upload from device	

	```
	deviceKey: `device_key_here`
	```

* Upload from your own App (Service provider)

	```
	appId: `appId_here`
	appSecret: `appSecret_here`
	```
	You can get the appId and appSecret under the Service provider section in the Profile page.


**2. Content Type**


* For Comma Separated Value (CSV) format:

	```
	Content-Type:`text/csv`
	```

* For JSON format:
	```
	Content-Type:`application/json`
	```

### Body

* **For CSV format:**

	**Syntax:**
	
	```	

	:Data_Channel_Id_1,:Timestamp,:Value_1,:Value_2,:Value_3\n*

	:Data_Channel_Id_2,:Timestamp,:Value_1\n*
	```	

	Please refer to the **data channel format** section for more detailed information on the request and response format for each type of data channel. 

	Note: *:Timestamp* field is optional. If there is no value provided in this field, MCS server will add the timestamp while receiving the data points.
	
	**Example:**
	
	```
	1,1432538716989,26
	2,,26.34,12,59
	```
	Line 1: "1" is the data channel ID, "1432538716989" is the timestamp generated by your device or application, "26" is the value of this data point.
	
	Line 2: "2" is the data channel ID. In this case, we leave the timestamp field empty, and then MCS server will append the current timestamp while it receives this data point. "26.34", "12" and "59" are the values of this data point. (This is a GPS data channel)


* **For JSON format:**

	**Syntax:**

	Each JSON object represents of a data point which is composed of

	1. dataChnID
	2. timestamp
	3. values: This is the combination of data emitted by this channel. In Some cases, a data channel is represented by more than one data. For example, the values of GPS channel consists of latitude, longitude and altitude.

	```
	{
  	 "datapoints":[
    	  {
       	  "dataChnId":"1",
       	  "timestamp":1432538716989,
       	  "values":{
          	  "value":"26"
        	 }
    	  },
   	   	  {
     	    "dataChnId":"2",
    	     "timestamp":1432538716989,
    	     "values":{
     	       "latitude":"26.34",
         	   "longitude":"12",
        	    "altitude":"59"
       		}
    	  }
  	 ]
	}

	```
	JSON object 1: "1" is the data channel ID, "1432538716989" is the timestamp generated by your device or application, "26" is the value of this data point.


	JSON object 2: "2" is the data channel ID. In this case, we leave the timestamp field empty, and then MCS server will append the current timestamp while it receives this data point. Because it is a GPS data channel, there are 3 values specified in the values object.
	

## Response

### Response Code
200

### Header

* **For CSV format:**

	```
	content-type: text/html
	```

* **For JSON format:**
	
	```
	content-type: application/json	
	```


### Body

* **For CSV format:**

	```
	Success.
	```

* **For JSON format:**
	
	```
	{
   		 "results": "success"
	}
	```

## Error Response

If there is an error while processing the request, MCS server will respond a non-200 response code and construct the response body with the following fields:

| Field Name | Type |Description|
| --- | --- | --- |
| code | Integer | Error code |
| message | String | General error message |
| description | String | Detailed error description |

**Example:**

* **For CSV format:**

	```
	400,None of data points uploaded success.
	```
	
* **For JSON format:**	
	
	```
	{
	    "apiVersion": "2.18.3",
	    "code": 400,
	    "message": "None of data points uploaded success.",
	    "errors": [
	        {
	            "code": 400,
	            "message": "400 Bad Request"
	        }
	    ],
	    "results": "",
	    "descriptions": [
	        "There is no such data channel displays_boolean for this device."
	    ],
	    "statusCode": 400,
	    "options": {}
	}
	```
